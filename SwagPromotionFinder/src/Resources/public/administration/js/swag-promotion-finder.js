(this.webpackJsonp=this.webpackJsonp||[]).push([["swag-promotion-finder"],{"/kYU":function(t,o){t.exports='{% block swag_promotion_list %}\n    <sw-page class="swag-promotion-list">\n        {% block swag_promotion_list_smart_bar_actions %}\n            <template slot="smart-bar-actions">\n                <sw-button variant="primary" :routerLink="{ name: \'swag.promotion.create\' }">\n                    {{ $t(\'swag-promotion.list.addButtonText\') }}\n                </sw-button>\n            </template>\n        {% endblock %}\n\n        <template slot="content">\n            {% block swag_promotion_list_content %}\n                <sw-entity-listing\n                    v-if="promotions"\n                    :items="promotions"\n                    :repository="repository"\n                    :showSelection="false"\n                    :columns="columns"\n                    detailRoute="swag.promotion.detail">\n                </sw-entity-listing>\n            {% endblock %}\n        </template>\n    </sw-page>\n{% endblock %}\n'},"0irZ":function(t,o){t.exports='<sw-page class="swag-promotion-detail">\n    <template slot="smart-bar-actions">\n        <sw-button :routerLink="{ name: \'swag.promotion.list\' }">\n            {{ $t(\'swag-promotion.detail.cancelButtonText\') }}\n        </sw-button>\n\n        <sw-button-process\n            :isLoading="isLoading"\n            :processSuccess="processSuccess"\n            variant="primary"\n            @process-finish="saveFinish"\n            @click="onClickSave">\n            {{ $t(\'swag-promotion.detail.saveButtonText\') }}\n        </sw-button-process>\n    </template>\n\n    <template slot="content">\n        <sw-card-view>\n            <sw-card v-if="promotion" :isLoading="isLoading">\n                <sw-field :label="$t(\'swag-promotion.detail.nameLabel\')" v-model="promotion.name"></sw-field>\n                <sw-field :label="$t(\'swag-promotion.detail.discountRateLabel\')" v-model="promotion.discountRate" type="number"></sw-field>\n                <sw-datepicker :label="$t(\'swag-promotion.detail.startDateLabel\')" v-model="promotion.startDate"></sw-datepicker>\n                <sw-datepicker :label="$t(\'swag-promotion.detail.expiredDateLabel\')" v-model="promotion.expiredDate"></sw-datepicker>\n\n                <sw-entity-single-select\n                    :label="$t(\'swag-promotion.detail.productLabel\')"\n                    entity="product"\n                    v-model="promotion.productId">\n                </sw-entity-single-select>\n            </sw-card>\n        </sw-card-view>\n    </template>\n</sw-page>\n'},DUg2:function(t){t.exports=JSON.parse('{"swag-promotion":{"general":{"name":"Promotion","description":"Manage promotions here","title":"Promotions"},"list":{"addButtonText":"Add promotion","columnName":"Name","columnProduct":"Product","columnDiscountRate":"Discount rate (%)","columnStartDate":"Start date","columnExpiredDate":"Expired date"},"detail":{"nameLabel":"Name","discountRateLabel":"Discount rate (%)","productLabel":"Products","startDateLabel":"Start date","expiredDateLabel":"Expired date","cancelButtonText":"Cancel","saveButtonText":"Save","errorTitle":"Error saving the promotion"}}}')},YVqB:function(t){t.exports=JSON.parse('{"swag-promotion":{"general":{"name":"Promotion","description":"Manage promotions here","title":"Promotions"},"list":{"addButtonText":"Add promotion","columnName":"Name","columnProduct":"Product","columnDiscountRate":"Discount rate (%)","columnStartDate":"Start date","columnExpiredDate":"Expired date"},"detail":{"nameLabel":"Name","discountRateLabel":"Discount rate (%)","productLabel":"Products","startDateLabel":"Start date","expiredDateLabel":"Expired date","cancelButtonText":"Cancel","saveButtonText":"Save","errorTitle":"Error saving the promotion"}}}')},cgEX:function(t,o){Shopware.Component.extend("swag-promotion-create","swag-promotion-detail",{methods:{getPromotion(){this.promotion=this.repository.create(Shopware.Context.api)},onClickSave(){console.log("onClickSave"),this.isLoading=!0,this.repository.save(this.promotion,Shopware.Context.api).then(t=>{console.log(t),this.isLoading=!1,this.$router.push({name:"swag.promotion.detail",params:{id:this.promotion.id}})}).catch(t=>{this.isLoading=!1,this.createNotificationError({title:this.$tc("swag-promotion.detail.errorTitle"),message:t})})}}})},n4Xb:function(t,o,e){"use strict";e.r(o);var i=e("/kYU"),n=e.n(i);const{Component:a}=Shopware,{Criteria:r}=Shopware.Data;a.register("swag-promotion-list",{template:n.a,inject:["repositoryFactory"],data:()=>({repository:null,promotions:null}),metaInfo(){return{title:this.$createTitle()}},created(){this.repository=this.repositoryFactory.create("swag_promotion"),console.log("before call api: ",this.repository),this.repository.search(new r,Shopware.Context.api).then(t=>{this.promotions=t,console.log("result from api: ",this.promotions)})},computed:{columns(){return[{property:"name",dataIndex:"name",label:this.$tc("swag-promotion.list.columnName"),routerLink:"swag.promotion.detail",inlineEdit:"string",allowResize:!0,primary:!0},{property:"discountRate",dataIndex:"discountRate",label:this.$tc("swag-promotion.list.columnDiscountRate"),inlineEdit:"number",allowResize:!0},{property:"startDate",dataIndex:"startDate",label:this.$tc("swag-promotion.list.columnStartDate"),inlineEdit:"string",allowResize:!0},{property:"expiredDate",dataIndex:"expiredDate",label:this.$tc("swag-promotion.list.columnExpiredDate"),inlineEdit:"string",allowResize:!0}]}}});var s=e("0irZ"),l=e.n(s);const{Component:p,Mixin:c}=Shopware;p.register("swag-promotion-detail",{template:l.a,inject:["repositoryFactory"],mixins:[c.getByName("notification")],metaInfo(){return{title:this.$createTitle()}},data:()=>({promotion:null,isLoading:!1,processSuccess:!1,repository:null}),computed:{options(){return[{value:"discountRate",name:this.$tc("swag-promotion.detail.discountRateLabel")}]}},created(){this.repository=this.repositoryFactory.create("swag_promotion"),this.getPromotion()},methods:{getPromotion(){this.repository.get(this.$route.params.id,Shopware.Context.api).then(t=>{this.promotion=t,console.log("this.promotion: ",this.promotion)})},onClickSave(){this.isLoading=!0,this.repository.save(this.promotion,Shopware.Context.api).then(()=>{this.getPromotion(),this.isLoading=!1,this.processSuccess=!0}).catch(t=>{this.isLoading=!1,this.createNotificationError({title:this.$tc("swag-promotion.detail.errorTitle"),message:t})})},saveFinish(){this.processSuccess=!1}}});e("cgEX");var m=e("YVqB"),d=e("DUg2");const{Module:g}=Shopware;g.register("swag-promotion",{type:"plugin",name:"swag-promotion.general.name",title:"swag-promotion.general.title",description:"swag-promotion.general.description",color:"#ca0b74",icon:"default-package-gift",snippet:{"en-GB":m,"de-De":d},routes:{list:{component:"swag-promotion-list",path:"list"},detail:{component:"swag-promotion-detail",path:"detail/:id",meta:{parentPath:"swag.promotion.list"}},create:{component:"swag-promotion-create",path:"create",meta:{parentPath:"swag.promotion.list"}}},navigation:[{label:"swag-promotion.general.name",color:"#ca0b74",path:"swag.promotion.list",icon:"default-package-gift",position:130}]})}},[["n4Xb","runtime"]]]);